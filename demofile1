This is B related code

Finshed logic B related code
